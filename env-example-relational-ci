NODE_ENV=development
APP_PORT=3000
APP_NAME="NestJS API"
API_PREFIX=api
APP_FALLBACK_LANGUAGE=en
APP_HEADER_LANGUAGE=x-custom-lang
BACKEND_DOMAIN=http://localhost:3000

TENANTS_B64=WwogIHsKICAgICJpZCI6ICIiLAogICAgIm5hbWUiOiAiUHVibGljIgogIH0sCiAgewogICAgImlkIjogImNpVGVuYW50QSIsCiAgICAibmFtZSI6ICJUZW5hbnQgQSIsCiAgICAiZnJvbnRlbmREb21haW4iOiAiaHR0cDovL2xvY2FsaG9zdDo5MDA1IiwKICAgICJjb21wYW55RG9tYWluIjogImh0dHBzOi8vb3Blbm1lZXQubmV0IiwKICAgICJsb2dvVXJsIjogImh0dHA6Ly9sb2NhbGhvc3Q6OTAwNS9vcGVubWVldC9vcGVubWVldC1sb2dvLnBuZyIsCiAgICAibWFpbERlZmF1bHRFbWFpbCI6ICJub3JlcGx5QG9wZW5tZWV0Lm5ldCIsCiAgICAibWFpbERlZmF1bHROYW1lIjogIk9wZW5NZWV0IiwKICAgICJtZXNzYWdpbmdSYXRlTGltaXQiOiAyMCwKICAgICJib3RVc2VyIjogewogICAgICAiZW1haWwiOiAiYm90LWNpVGVuYW50QUBvcGVubWVldC5uZXQiLAogICAgICAic2x1ZyI6ICJvcGVubWVldC1ib3QtY2lUZW5hbnRBIiwKICAgICAgInBhc3N3b3JkIjogImJvdC1zZWN1cmUtcGFzc3dvcmQtY2lUZW5hbnRBLTIwMjUiCiAgICB9CiAgfSwKICB7CiAgICAiaWQiOiAiY2lUZW5hbnRCIiwKICAgICJuYW1lIjogIlRlbmFudCBCIiwKICAgICJmcm9udGVuZERvbWFpbiI6ICJodHRwczovL3Rlc3Rpbmcub3Blbm1lZXQubmV0IiwKICAgICJjb21wYW55RG9tYWluIjogImh0dHBzOi8vdGVzdGluZy5vcGVubWVldC5uZXQiLAogICAgImNvbmZpcm1FbWFpbCI6IGZhbHNlLAogICAgIm1haWxEZWZhdWx0RW1haWwiOiAibm9yZXBseUBvcGVubWVldC5uZXQiLAogICAgIm1haWxEZWZhdWx0TmFtZSI6ICJPcGVuTWVldCBUZXN0aW5nIFRlbmFudCIsCiAgICAibWVzc2FnaW5nUmF0ZUxpbWl0IjogMjAsCiAgICAiYm90VXNlciI6IHsKICAgICAgImVtYWlsIjogImJvdC1jaVRlbmFudEJAb3Blbm1lZXQubmV0IiwKICAgICAgInNsdWciOiAib3Blbm1lZXQtYm90LWNpVGVuYW50QiIsCiAgICAgICJwYXNzd29yZCI6ICJib3Qtc2VjdXJlLXBhc3N3b3JkLWNpVGVuYW50Qi0yMDI1IgogICAgfQogIH0KXQo=

# Test tenant, must exist in the TENANTS_B64 variable
TEST_TENANT_ID=ciTenantB

# Admin of the installation
ADMIN_EMAIL=admin@openmeet.net
ADMIN_PASSWORD=secret

# Test user
TEST_USER_EMAIL=test@openmeet.net
TEST_USER_PASSWORD=secret

DATABASE_TYPE=postgres
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_USERNAME=root
DATABASE_PASSWORD=secret
DATABASE_NAME=api
DATABASE_SYNCHRONIZE=false
DATABASE_MAX_CONNECTIONS=1000
DATABASE_SSL_ENABLED=false
DATABASE_REJECT_UNAUTHORIZED=false
DATABASE_CA=
DATABASE_KEY=
DATABASE_CERT=
DATABASE_URL=

# Support "local", "s3", "s3-presigned"
FILE_DRIVER=local
ACCESS_KEY_ID=None
SECRET_ACCESS_KEY=None
AWS_S3_REGION=None
AWS_DEFAULT_S3_BUCKET=None

MAIL_HOST=maildev
MAIL_PORT=1025
MAIL_USER=
MAIL_PASSWORD=
MAIL_IGNORE_TLS=true
MAIL_SECURE=false
MAIL_REQUIRE_TLS=false
MAIL_DEFAULT_EMAIL=noreply@openmeet.net
MAIL_DEFAULT_NAME=Api
MAIL_CLIENT_PORT=1080

AUTH_JWT_SECRET=secret
AUTH_JWT_TOKEN_EXPIRES_IN=15m
AUTH_REFRESH_SECRET=secret_for_refresh
AUTH_REFRESH_TOKEN_EXPIRES_IN=3650d
AUTH_FORGOT_SECRET=secret_for_forgot
AUTH_FORGOT_TOKEN_EXPIRES_IN=30m
AUTH_CONFIRM_EMAIL_SECRET=secret_for_confirm_email
AUTH_CONFIRM_EMAIL_TOKEN_EXPIRES_IN=1d

FACEBOOK_APP_ID=
FACEBOOK_APP_SECRET=

APPLE_APP_AUDIENCE=[]

TWITTER_CONSUMER_KEY=
TWITTER_CONSUMER_SECRET=

WORKER_HOST=redis://redis:6379/1

# LIVENESS_PROBE_API_URL=https://api.openmeet.net
# LIVENESS_PROBE_DOCS_URL=https://api.openmeet.net/docs

# Testing
TESTING_USER_EMAIL=testing.user@openmeet.net
TESTING_USER_PASSWORD=secret
TESTING_USER_ID=1
TESTING_ADMIN_EMAIL=testing.admin@openmeet.net
TESTING_ADMIN_PASSWORD=secret
TESTING_ADMIN_ID=2
TESTING_TENANT_ID=testing

# ElastiCache Configuration
ELASTICACHE_HOST=redis
ELASTICACHE_PORT=6379
ELASTICACHE_AUTH=false
ELASTICACHE_REJECT_UNAUTHORIZED=false
ELASTICACHE_TLS=false
# If using auth
ELASTICACHE_TOKEN=1234567890

# Matrix configuration for CI testing
MATRIX_HOMESERVER_URL=http://matrix:8448
MATRIX_SERVER_NAME=matrix-ci.openmeet.test
MATRIX_ADMIN_USERNAME=admin
MATRIX_ADMIN_PASSWORD=admin_secret_password
MATRIX_REGISTRATION_SECRET=ci_test_registration_secret

# Matrix Appservice configuration for CI
MATRIX_APPSERVICE_TOKEN=ci-appservice-token-971a507cac6945e1259b7d7377b7c497f733376c
MATRIX_APPSERVICE_HS_TOKEN=ci-hs-token-df51b086825667040f89888d920641c44d449b8741cfee1e02ce6f
MATRIX_APPSERVICE_ID=openmeet-bot-ci
MATRIX_APPSERVICE_URL=http://api:3000/api/matrix/appservice

# Matrix OIDC endpoints for CI environment
MATRIX_OIDC_CLIENT_SECRET=ci-matrix-client-secret-for-testing
MATRIX_OIDC_AUTHORIZATION_ENDPOINT=http://api:3000/api/oidc/auth
MATRIX_OIDC_TOKEN_ENDPOINT=http://api:3000/api/oidc/token
MATRIX_OIDC_USERINFO_ENDPOINT=http://api:3000/api/oidc/userinfo
MATRIX_OIDC_JWKS_URI=http://api:3000/api/oidc/jwks

# Matrix Authentication Service (MAS) configuration for CI
MAS_DATABASE_NAME=mas_ci
MAS_DATABASE_HOST=postgres
MAS_ENCRYPTION_SECRET=1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
MAS_ADMIN_TOKEN=ci-mas-admin-token
MAS_CLIENT_SECRET=ci-mas-client-secret-for-testing
MAS_ISSUER=http://matrix-auth-service:8080/
MAS_SERVICE_URL=http://matrix-auth-service:8080
MAS_INTROSPECTION_ENDPOINT=http://matrix-auth-service:8080/oauth2/introspect
MAS_ACCOUNT_MANAGEMENT_URL=http://matrix-auth-service:8080/account
MATRIX_HOST=matrix
MATRIX_PORT=8448

# Template variables for CI environment
ENVIRONMENT=ci
MAS_PUBLIC_BASE=http://matrix-auth-service:8080
MATRIX_ENDPOINT=http://matrix:8448
BOT_CLIENT_SECRET=openmeet-bot-client-secret-ci
OAUTH_PROVIDER_NAME=OpenMeet CI
OAUTH_ISSUER=http://api:3000/oidc
OAUTH_CLIENT_ID=mas_client
OAUTH_CLIENT_SECRET=ci-mas-client-secret-for-testing
MAS_SERVICE_NAME=OpenMeet CI Authentication
MAIL_MODE=plain
PROMETHEUS_ENABLED=false
SYNAPSE_PUBLIC_BASEURL=http://matrix:8448
WEB_CLIENT_LOCATION=http://platform:9005
SYNAPSE_DATABASE_NAME=synapse
SYNAPSE_DATABASE_HOST=postgres
SYNAPSE_MACAROON_SECRET_KEY=ci-secret-key-here
SYNAPSE_FORM_SECRET=ci-form-secret-here
SYNAPSE_ENABLE_METRICS=true
SYNAPSE_MAX_UPLOAD_SIZE=50M
SYNAPSE_URL_PREVIEW_ENABLED=false

# Multi-line template variables (comma-separated for gomplate)
FRONTEND_REDIRECT_URIS=http://platform:9005/auth/matrix/callback,http://platform:9005/events/*
POLICY_ADMIN_USERS=ci-test-admin,@ci-test-admin:matrix-ci.openmeet.test

# MAS Matrix Homeserver URL for CI environment
MAS_MATRIX_HOMESERVER_URL=http://matrix:8448

# MAS Mail configuration for CI environment
MAS_MAIL_HOST=maildev
MAS_MAIL_PORT=1025

# MAS Token TTL configuration for CI environment (in seconds)
MAS_ACCESS_TOKEN_TTL=300
MAS_COMPAT_TOKEN_TTL=300